<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Результаты теста</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/quiz.css') }}">
</head>
<body>
<div class="results-container">
    <h1>
        {% if test_type == 'easy' %}
        Результаты лёгкого теста
        {% elif test_type == 'medium' %}
        Результаты среднего теста
        {% elif test_type == 'hard' %}
        Результаты сложного теста
        {% else %}
        {% endif %}
    </h1>


    <div class="score-summary">
        <div class="score-circle
                {% if score/total >= 0.8 %}excellent
                {% elif score/total >= 0.5 %}good
                {% else %}poor
                {% endif %}">
            {{ score }}/{{ total }}
        </div>
        <p class="score-text">
            {% if score/total >= 0.8 %}
            Отличный результат!
            {% elif score/total >= 0.5 %}
            Хороший результат!
            {% else %}
            Есть над чем поработать!
            {% endif %}
        </p>
    </div>

    <!-- Все вопросы -->
    <div id="all" class="tab-content active">
        {% for result in results %}
        <div class="result-item
                {% if result.is_correct %}correct{% else %}incorrect{% endif %}
                difficulty-{{ result.difficulty }}">
            <div class="result-header">
                <span class="question-number">{{ loop.index }}.</span>
                {% if test_type == 'mixed' %}
                <span class="difficulty-badge">
                        {% if result.difficulty == 1 %}
                            Лёгкий
                        {% elif result.difficulty == 3 %}
                            Сложный
                        {% else %}
                            Средний
                        {% endif %}
                    </span>
                {% endif %}
            </div>

            <div class="result-question">
                {{ result.question }}
            </div>

            <div class="user-answer">
                Ваш ответ: <span class="{% if result.is_correct %}correct-answer{% else %}wrong-answer{% endif %}">
                        {{ result.user_answer }}
                    </span>
            </div>

            {% if not result.is_correct %}
            <div class="correct-answer">
                Правильный ответ: {{ result.correct_answer }}
            </div>
            {% endif %}

            <div class="result-icon">
                {% if result.is_correct %}
                <span class="correct-icon">✓</span>
                {% else %}
                <span class="incorrect-icon">✗</span>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>


    <div class="actions">
        <a href="{{ url_for(test_type + '_quiz') }}" class="btn-retry">Пройти ещё раз</a>

        <a href="{{ url_for('home') }}" class="btn-home">На главную</a>

        {% if test_type == 'easy' %}
        <a href="{{ url_for('medium_quiz') }}" class="btn-next">Средний тест →</a>
        {% elif test_type == 'medium' %}
        <a href="{{ url_for('hard_quiz') }}" class="btn-next">Сложный тест →</a>
        {% endif %}
    </div>
</div>
</body>
</html>